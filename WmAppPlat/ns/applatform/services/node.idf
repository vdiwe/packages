<?xml version="1.0" encoding="UTF-8"?>

<Values version="2.0">
  <value name="shared">CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgUEFSRU5UX1BBQ0tBR0VfTkFNRSA9ICJX
bUFwcFBsYXQiOwogICAgLy8gIG1hbmlmZXN0IGRlcGVuZGVuY3kgQVBJIHJlcXVpcmVzICdwYXJl
bnQgcGFja2FnZSc7IGN1cnJlbnRseSBpZ25vcmVkCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBT
dHJpbmcgRFVNTVlfUEFSRU5UX1BBQ0tBR0VfTkFNRSA9ICJEZWZhdWx0IjsKCiAgICBwcml2YXRl
IHN0YXRpYyBTdHJpbmcgbmFtZUZyb21QaXBlKElEYXRhTWFwIGluUGlwZSkgewogICAgICAgIFN0
cmluZyBpZmNOYW1lID0gaW5QaXBlLmdldEFzU3RyaW5nKCJzZXJ2aWNlSW50ZXJmYWNlIiwgInNl
cnZpY2UucG9qby50ZXN0Iik7CiAgICAgICAgU3RyaW5nIHN2Y05hbWUgPSBpblBpcGUuZ2V0QXNT
dHJpbmcoInNlcnZpY2VOYW1lIiwgImNvbmNhdCIpOwogICAgICAgIHJldHVybiBpZmNOYW1lICsg
IjoiICsgc3ZjTmFtZTsKICAgIH0KCgogICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCB1bnJlZ2lzdGVy
KFN0cmluZyBpblN2Y05hbWUsIFN0cmluZyBpblBrZ05hbWUsIFN0cmluZyBzeW1iTmFtZSwgU3Ry
aW5nIGJ1bmRsZVZlcnNpb24sIGJvb2xlYW4gZGVidWcpIHRocm93cyBFeGNlcHRpb24gewogICAg
CWVuc3VyZVBhY2thZ2VFeGlzdHMoaW5Qa2dOYW1lLCBkZWJ1Zyk7CiAgICAJaWYgKGRlYnVnKSBs
b2coU3RyaW5nLmZvcm1hdCgiR2V0dGluZyBzZXJ2aWNlIG5vZGUgJyVzJyBpbiBwYWNrYWdlICcl
cyciLGluU3ZjTmFtZSwgaW5Qa2dOYW1lKSk7CiAgICAgICAgT2JqZWN0IHN2Y05vZGUgPSBnZXRO
b2RlKGluU3ZjTmFtZSk7CiAgICAgICAgaWYgKCBzdmNOb2RlID09IG51bGwgKSB7CiAgICAgICAg
CWlmIChkZWJ1ZykgbG9nKFN0cmluZy5mb3JtYXQoIlNlcnZpY2Ugbm9kZSAnJXMnIGRvZXMgbm90
IGV4aXN0IiwgaW5TdmNOYW1lKSk7CiAgICAgICAgCXJldHVybjsKICAgICAgICB9CiAgICAJaWYg
KCBzaG91bGRSZW1vdmVTZXJ2aWNlQmluZGluZyhzdmNOb2RlLCBzeW1iTmFtZSwgYnVuZGxlVmVy
c2lvbiwgZGVidWcpICYmIHJlbW92ZVNlcnZpY2VOb2RlKHN2Y05vZGUsIGluU3ZjTmFtZSwgaW5Q
a2dOYW1lLCBkZWJ1ZykgKSB7CiAgICAgICAgICAgIAlQYWNrYWdlTWFuYWdlci5sb2FkUGFja2Fn
ZShpblBrZ05hbWUsIHRydWUsIGZhbHNlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgIAlpZiAo
ZGVidWcpIGxvZyhTdHJpbmcuZm9ybWF0KCJTZXJ2aWNlIG5vZGUgJyVzJyBub3QgcmVtb3ZlZCAi
LCBpblN2Y05hbWUpKTsKICAgICAgICB9CgogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIGJvb2xl
YW4gc2hvdWxkUmVtb3ZlU2VydmljZUJpbmRpbmcoT2JqZWN0IHN2Y05vZGUsIFN0cmluZyBzeW1i
TmFtZSwgU3RyaW5nIGJ1bmRsZVZlcnNpb24sIGJvb2xlYW4gZGVidWcpIHsKICAgIAlpZiAoIHN2
Y05vZGUgaW5zdGFuY2VvZiBCYXNlU2VydmljZSkgewogICAgCQlJRGF0YSBzdmNEYXRhID0gKChC
YXNlU2VydmljZSlzdmNOb2RlKS5nZXRBc0RhdGEoKTsKICAgIAkJSURhdGFNYXAgc3ZjTWFwID0g
bmV3IElEYXRhTWFwKHN2Y0RhdGEpOwogICAgCQlJRGF0YU1hcCBtZXRhZGF0YU1hcCA9IHN2Y01h
cC5nZXRBc0lEYXRhTWFwKCJtZXRhZGF0YSIpOyAvL0NvbnN0YW50cy5LRVlfQVBfU1ZDX01FVEFE
QVRBCiAgICAJCWlmICggbWV0YWRhdGFNYXAgIT0gbnVsbCkgewogICAgCQkJU3RyaW5nIGNzclN5
bWJOYW1lID0gbWV0YWRhdGFNYXAuZ2V0QXNTdHJpbmcoIkJ1bmRsZS1TeW1ib2xpY05hbWUiKTsg
Ly9Db25zdGFudHMuS0VZX1NFUlZJQ0VfQlVORExFX1NZTUJPTElDX05BTUUKICAgIAkJCVN0cmlu
ZyBjc3JCdW5kbGVWZXJzaW9uID0gbWV0YWRhdGFNYXAuZ2V0QXNTdHJpbmcoIkJ1bmRsZS1WZXJz
aW9uIik7IC8vQ29uc3RhbnRzLktFWV9TRVJWSUNFX0JVTkRMRV9WRVJTSU9OCiAgICAJCQlpZiAo
ZGVidWcpIGxvZyhTdHJpbmcuZm9ybWF0KCJjdXN0b21lciBidW5kbGU6ICVzLyVzLCBjbGllbnQt
YmluZGluZzogJXMvJXMiLAogICAgCQkJCQlzeW1iTmFtZSwgYnVuZGxlVmVyc2lvbiwgY3NyU3lt
Yk5hbWUsIGNzckJ1bmRsZVZlcnNpb24pKTsKICAgIAkJCS8vIGlmIHNlcnZpY2UgYmluZGluZyAo
Y3NyKSBoYXMgbm8gYnVuZGxlIHN5bWJvbGljIG5hbWUsIHJldHVybiB0cnVlLiBJdCdzIGEgcHJl
LTkuMTAgZ2VuZXJhdGVkIGJpbmRpbmcgdGhhdCBzaG91bGQgYmUgcmVjcmVhdGVkIGxhdGVyCiAg
ICAJCQkvLyAoUmUtZGVwbG95aW5nIGJ1bmRsZXMgaXMgcGFydCBvZiBvdXIgbWlncmF0aW9uIHN0
cmF0ZWd5KQogICAgCQkJLy8gT3RoZXJ3aXNlLCB0aGUgdmVyc2lvbiBhbmQgc3ltYm9saWMgbmFt
ZSBtdXN0IG1hdGNoCiAgICAJCQlyZXR1cm4gKCBjc3JTeW1iTmFtZSA9PSBudWxsIHx8ICggc3lt
Yk5hbWUuZXF1YWxzKGNzclN5bWJOYW1lKSAmJiBidW5kbGVWZXJzaW9uLmVxdWFscyhjc3JCdW5k
bGVWZXJzaW9uKSkgKTsKICAgIAkJfQoKICAgIAl9CiAgICAJcmV0dXJuIGZhbHNlOwogICAgfQoK
ICAgIHByaXZhdGUgc3RhdGljIHZvaWQgY3JlYXRlQW5kUmVnaXN0ZXIoU3RyaW5nIGluU3ZjTmFt
ZSwgU3RyaW5nIGluUGtnTmFtZSwgSURhdGEgaW5NZXRhRGF0YSwgYm9vbGVhbiBkZWJ1ZykgdGhy
b3dzIEV4Y2VwdGlvbiB7CiAgICAJZW5zdXJlUGFja2FnZUV4aXN0cyhpblBrZ05hbWUsIGRlYnVn
KTsKICAgIAlpZiAoZGVidWcpIGxvZyhTdHJpbmcuZm9ybWF0KCJHZXR0aW5nIHNlcnZpY2Ugbm9k
ZSAnJXMnIGluIHBhY2thZ2UgJyVzJyIsaW5TdmNOYW1lLCBpblBrZ05hbWUpKTsKICAgICAgICBP
YmplY3Qgc3ZjTm9kZSA9IGdldE5vZGUoaW5TdmNOYW1lKTsKICAgICAgICBpZiAoIHN2Y05vZGUg
PT0gbnVsbCApIHsKICAgICAgICAJaWYgKGRlYnVnKSBsb2coU3RyaW5nLmZvcm1hdCgiQ3JlYXRp
bmcgc2VydmljZSBub2RlICclcycgaW4gcGFja2FnZSAnJXMnIiwgaW5TdmNOYW1lLCBpblBrZ05h
bWUpKTsKICAgICAgICAgICAgY3JlYXRlTmV3U2VydmljZU5vZGUoaW5TdmNOYW1lLCBpblBrZ05h
bWUsIGluTWV0YURhdGEsIGRlYnVnKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAg
ICAgIHVwZGF0ZUV4aXN0aW5nU2VydmljZU5vZGUoc3ZjTm9kZSwgaW5TdmNOYW1lLCBpblBrZ05h
bWUsIGluTWV0YURhdGEsIGRlYnVnKTsKICAgICAgICB9CiAgICAJUGFja2FnZU1hbmFnZXIubG9h
ZFBhY2thZ2UoaW5Qa2dOYW1lLCB0cnVlLCBmYWxzZSk7CiAgICB9CiAgICAKICAgIC8qKiBWZXJp
ZnkgdGhlIGN1c3RvbWVyIHBhY2thZ2UgZXhpc3RzICovCiAgICBwcml2YXRlIHN0YXRpYyB2b2lk
IGVuc3VyZVBhY2thZ2VFeGlzdHMoU3RyaW5nIGluUGtnTmFtZSwgYm9vbGVhbiBkZWJ1ZykgdGhy
b3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgUGFja2FnZSByZXR1cm5Qa2cgPSBQYWNrYWdlTWFuYWdl
ci5nZXRQYWNrYWdlKGluUGtnTmFtZSk7CiAgICAgICAgaWYgKCByZXR1cm5Qa2cgPT0gbnVsbCAp
IHsKICAgICAgICAgICAgbWFrZVBhY2thZ2UoaW5Qa2dOYW1lLCBkZWJ1Zyk7CiAgICAgICAgICAg
IHJldHVyblBrZyA9IFBhY2thZ2VNYW5hZ2VyLmdldFBhY2thZ2UoaW5Qa2dOYW1lKTsKICAgICAg
ICB9CiAgICAgICAgYWRkQXBwUGxhdERlcGVuZGVuY3kocmV0dXJuUGtnLCBEVU1NWV9QQVJFTlRf
UEFDS0FHRV9OQU1FLCBQQVJFTlRfUEFDS0FHRV9OQU1FLCBnZXRHYXRld2F5UGFja2FnZVZlcnNp
b24oKSwgZGVidWcpOwogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIHZvaWQgbWFrZVBhY2thZ2Uo
U3RyaW5nIGluTmFtZSwgYm9vbGVhbiBkZWJ1ZykgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAg
SURhdGFNYXAgcGlwZU1hcCA9IG5ldyBJRGF0YU1hcCgpOwogICAgICAgIHBpcGVNYXAucHV0KCJw
YWNrYWdlIiwgaW5OYW1lKTsKICAgICAgICBJRGF0YU1hcCByZXN1bHRNYXAgPSBuZXcgSURhdGFN
YXAoKTsKCiAgICAJaWYgKGRlYnVnKSBsb2coU3RyaW5nLmZvcm1hdCgiQ3JlYXRpbmcgcGFja2Fn
ZTogJXMiLGluTmFtZSkpOwogICAgICAgIElEYXRhIHJlc3VsdERhdGEgPSBTZXJ2aWNlLmRvSW52
b2tlKFNlcnZlcklmLklGQ19QQUNLQUdFUywgInBhY2thZ2VDcmVhdGUiLCBwaXBlTWFwLmdldElE
YXRhKCkpOwogICAgICAgIHJlc3VsdE1hcCA9IG5ldyBJRGF0YU1hcChyZXN1bHREYXRhKTsKICAg
ICAgICBpbnQgcmMgPSByZXN1bHRNYXAuZ2V0QXNJbnRlZ2VyKCJjb2RlIik7CiAgICAgICAgU3Ry
aW5nIG1lc3NhZ2UgPSByZXN1bHRNYXAuZ2V0QXNTdHJpbmcoIm1lc3NhZ2UiKTsKICAgICAgICBp
ZiAoIHJjID09IFNlcnZlcklmLlBLR19TRVJWSUNFX1NVQ0NFU1NfQ09ERSApIHsKICAgICAgICAg
ICAgcGlwZU1hcCA9IG5ldyBJRGF0YU1hcCgpOwogICAgICAgICAgICBwaXBlTWFwLnB1dCgicGFj
a2FnZSIsIGluTmFtZSk7CiAgICAgICAgICAgIGxvZyhTdHJpbmcuZm9ybWF0KCJBY3RpdmF0aW5n
IHBhY2thZ2U6ICVzIixpbk5hbWUpKTsKICAgICAgICAgICAgcmVzdWx0RGF0YSA9IFNlcnZpY2Uu
ZG9JbnZva2UoU2VydmVySWYuSUZDX1BBQ0tBR0VTLCAicGFja2FnZUFjdGl2YXRlIiwgcGlwZU1h
cC5nZXRJRGF0YSgpKTsKICAgICAgICAgICAgcmVzdWx0TWFwID0gbmV3IElEYXRhTWFwKHJlc3Vs
dERhdGEpOwogICAgICAgICAgICByYyA9IHJlc3VsdE1hcC5nZXRBc0ludGVnZXIoImNvZGUiKTsK
ICAgICAgICAgICAgaWYgKCByYyAhPSBTZXJ2ZXJJZi5QS0dfU0VSVklDRV9TVUNDRVNTX0NPREUp
IHsKICAgICAgICAgICAgCXRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKCBTdHJpbmcuZm9ybWF0
KCAiJXM6JXMgZm9yICVzIGNvZGUoJXMpLiAgJXMiLAogICAgICAgICAgCQkJICBTZXJ2ZXJJZi5J
RkNfUEFDS0FHRVMsInBhY2thZ2VBY3RpdmF0ZSIsaW5OYW1lLCByYywgbWVzc2FnZSkpOwogICAg
ICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAJdGhyb3cgbmV3IFJ1bnRpbWVFeGNl
cHRpb24oIFN0cmluZy5mb3JtYXQoICIlczolcyBmb3IgJXMgY29kZSglcykuICAlcyIsCiAgICAg
ICAgCQkJICBTZXJ2ZXJJZi5JRkNfUEFDS0FHRVMsInBhY2thZ2VDcmVhdGUiLGluTmFtZSwgcmMs
IG1lc3NhZ2UpKTsKICAgICAgICB9CgogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIHZvaWQgYWRk
QXBwUGxhdERlcGVuZGVuY3koUGFja2FnZSBpblBrZywgU3RyaW5nIGluUGFyZW50RHVtbXlOYW1l
LCBTdHJpbmcgaW5QYXJlbnRQYWNrYWdlTmFtZSwKICAgIAkJICAgICBTdHJpbmcgaW5QYXJlbnRW
ZXJzaW9uLCBib29sZWFuIGRlYnVnKSB7CiAgICAgICAgTWFuaWZlc3QgbWFuaSA9IGluUGtnLmdl
dE1hbmlmZXN0KCk7CiAgICAgICAgU3RyaW5nW10gcmVxdWlyZXMgPSBtYW5pLmdldFJlcXVpcmVz
QXNTdHIoKTsKICAgICAgICBib29sZWFuIHVwZGF0ZSA9IHRydWU7CiAgICAgICAgaWYgKCByZXF1
aXJlcyAhPSBudWxsICkgewogICAgICAgIAlmb3IgKCBTdHJpbmcgcmVxdWlyZSA6IHJlcXVpcmVz
ICkgewogICAgICAgIAkJaWYgKCByZXF1aXJlLnN0YXJ0c1dpdGgoIFBBUkVOVF9QQUNLQUdFX05B
TUUpICkgewogICAgICAgIAkJCXVwZGF0ZSA9ICFyZXF1aXJlLmVxdWFscyhnZXRHYXRld2F5UGFj
a2FnZVZlcnNpb24oKSk7CiAgICAgICAgCQkJaWYgKCB1cGRhdGUpIHsKICAgICAgICAJCQkJaWYg
KGRlYnVnKSBsb2coU3RyaW5nLmZvcm1hdCgiYWRkQXBwUGxhdERlcGVuZGVuY3koKSByZW1vdmlu
ZyBvdXRkYXRlZCAnJXMnIGRlcGVuZGVuY3kgZnJvbSBwYWNrYWdlICclcyciLCByZXF1aXJlLCBp
blBrZy5nZXROYW1lKCkpKTsKCSAgICAgICAgCQkJbWFuaS5kZWxEZXBlbmRlbmN5KCByZXF1aXJl
ICk7CgkgICAgICAgIAkgICAgICAgIGJyZWFrOwogICAgICAgIAkJCX0KICAgICAgICAJCX0KICAg
ICAgICAJfQogICAgICAgIH0KICAgICAgICBpZiAoIHVwZGF0ZSkgewoJCQlTdHJpbmdCdWZmZXIg
bXNnQnVmZiA9IG5ldyBTdHJpbmdCdWZmZXIoKTsKCSAgICAgICAgbWFuaS5hZGREZXBlbmRlbmN5
KGluUGFyZW50RHVtbXlOYW1lLCBnZXRHYXRld2F5UGFja2FnZVZlcnNpb24oKSwgbXNnQnVmZik7
CgkgICAgICAgIGlmIChkZWJ1ZykgbG9nKFN0cmluZy5mb3JtYXQoImFkZEFwcFBsYXREZXBlbmRl
bmN5KCkgYXBwbHlpbmcgJyVzJyBkZXBlbmRlbmN5IHRvIHBhY2thZ2UgJyVzJy4gRGV0YWlsczog
JXMiLCBnZXRHYXRld2F5UGFja2FnZVZlcnNpb24oKSwgaW5Qa2cuZ2V0TmFtZSgpLCBtc2dCdWZm
LnRvU3RyaW5nKCkpKTsKCgkgICAgICAgIFBhY2thZ2VNYW5hZ2VyLnNhdmVQYWNrYWdlQ29uZmln
dXJhdGlvbihpblBrZyk7CiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIHZvaWQg
Y3JlYXRlTmV3U2VydmljZU5vZGUoU3RyaW5nIGluU3ZjTmFtZSwgU3RyaW5nIGluUGtnTmFtZSwg
SURhdGEgaW5NZXRhRGF0YSwgYm9vbGVhbiBkZWJ1ZykgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAg
ICAgZ3VhcmFudGVlSW50ZXJmYWNlUGF0aChpblBrZ05hbWUsIGluU3ZjTmFtZSk7CiAgICAgICAg
SURhdGFNYXAgcGlwZU1hcCA9IG5ldyBJRGF0YU1hcCgpOwogICAgICAgIGFkZFNlcnZpY2VEZXRh
aWxzKHBpcGVNYXAsIGluU3ZjTmFtZSwgaW5Qa2dOYW1lLCBpbk1ldGFEYXRhKTsKICAgICAgICBp
ZiAoZGVidWcpIGxvZyhTdHJpbmcuZm9ybWF0KCJtYWtlTm9kZSAlcyBhbmQgYWRkIHRvIHBhY2th
Z2UgJXMiLGluU3ZjTmFtZSwgaW5Qa2dOYW1lKSk7CiAgICAgICAgU2VydmljZS5kb0ludm9rZShT
ZXJ2ZXJJZi5JRkNfTlMsICJtYWtlTm9kZSIsIHBpcGVNYXAuZ2V0SURhdGEoKSk7CiAgICAgICAg
TlNOYW1lIG5hbWUgPSBOU05hbWUuY3JlYXRlKGluU3ZjTmFtZSk7CiAgICAgICAgUGFja2FnZSBw
a2cgPSBQYWNrYWdlTWFuYWdlci5nZXRQYWNrYWdlKGluUGtnTmFtZSk7CiAgICAgICAgcGtnLmdl
dFN0b3JlKCkuYWRkVG9Ob2RlKG5hbWUsIFBhY2thZ2VTdG9yZS5OREZfRklMRSwgcGlwZU1hcC5n
ZXRJRGF0YSgpKTsKICAgICAgICAKICAgICAgICBTdHJpbmcgeEFjbCA9IGdldEV4ZWN1dGVBQ0xG
cm9tQWxsb3dlZFJvbGVzKG5ldyBJRGF0YU1hcChpbk1ldGFEYXRhKSwgZGVidWcpOyAgICAgICAg
CiAgICAgICAgU3RyaW5nIHJNc2cgPSB1cGRhdGVBQ0xzRm9yU2VydmljZSggaW5TdmNOYW1lLCAK
ICAgICAgICAJCUFDTE1hbmFnZXIuV0VCTV9ERVZFTE9QRVJTX0FDTCwgLy9BQ0xNYW5hZ2VyLldF
Qk1fQURNSU5JU1RSQVRPUlNfQUNMLCAgLy8gYnJvd3NlCiAgICAgICAgCQl4QWNsLCAgLy8gZXhl
Y3V0ZSAKICAgICAgICAJCW51bGwsIC8qQUNMTWFuYWdlci5XRUJNX0lOVEVSTkFMREVWX0FDTCwq
LyAvLyByZWFkCiAgICAgICAgCQludWxsLCAvKkFDTE1hbmFnZXIuV0VCTV9JTlRFUk5BTERFVl9B
Q0wsKi8gLy8gd3JpdGUKICAgICAgICAJCWRlYnVnKTsgCiAgICAgICAgICAgICAgICAKICAgICAg
ICBQYWNrYWdlTWFuYWdlci5sb2FkUGFja2FnZVBhcnRpYWwoaW5Qa2dOYW1lLCBuZXcgTlNOYW1l
W10geyBuYW1lIH0pOwoKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBHZXQgdGhlIGZpcnN0IHJv
bGUgdGhhdCBpcyBhY3RpdmVseSB1c2VkIGluIEludGVncmF0aW9uIFNlcnZlciBhbmQgdXNlIHRo
aXMgYXMgdGhlIEV4ZWN1dGUgQUNMCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIFN0cmluZyBn
ZXRFeGVjdXRlQUNMRnJvbUFsbG93ZWRSb2xlcyhJRGF0YU1hcCBtZXRhZGF0YU1hcCwgYm9vbGVh
biBkZWJ1ZykgewogICAgCQogICAgCVN0cmluZyB4QWNsID0gbnVsbDsKICAgIAlTdHJpbmdbXSBy
b2xlcyA9IChTdHJpbmdbXSltZXRhZGF0YU1hcC5nZXRBc1N0cmluZ0FycmF5KCJhbGxvd2VkUm9s
ZXMiKTsgLy9Db25zdGFudHMuS0VZX1NFUlZJQ0VfQUxMT1dFRF9ST0xFUwogICAgCWludCBzeiA9
ICggcm9sZXMgPT0gbnVsbCA/IDAgOiByb2xlcy5sZW5ndGgpOwogICAgCWlmICggc3ogPiAwKSB7
CiAgICAJCWZvciAoIFN0cmluZyByb2xlIDogcm9sZXMpIHsKICAgIAkJCWlmICggQUNMTWFuYWdl
ci5nZXRHcm91cChyb2xlKSAhPSBudWxsKSB7CiAgICAJCQkJeEFjbCA9IHJvbGU7CiAgICAJCQkJ
YnJlYWs7CiAgICAJCQl9CiAgICAJCX0KICAgIAkJCiAgICAJCWlmICggeEFjbCA9PSBudWxsKSB7
CiAgICAJCQlpZiAoZGVidWcpIGxvZyhTdHJpbmcuZm9ybWF0KCJOTyBJUyBBQ0wgZXhpc3RzIGZv
ciBkZXNpZ25hdGVkIHJvbGVzOiAgJXMiLEFycmF5cy5hc0xpc3Qocm9sZXMpKSk7CiAgICAJCX0K
ICAgIAl9IAogICAgCXJldHVybiB4QWNsOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFVwZGF0
ZXMgdGhlIEFDTCBmb3IgdGhlIHNwZWNpZmllZCBzZXJ2aWNlCiAgICAgKiBOdWxsIHZhbHVlcyBp
bXBseSBpbnRlbnQgdG8gcmVzZXQgYmFjayB0byB0aGUgJ0luaGVyaXRlZCcgZGVmYXVsdCBiZWhh
dmlvciBmb3IgdGhlIHNlcnZpY2UKICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgU3RyaW5nIHVw
ZGF0ZUFDTHNGb3JTZXJ2aWNlKFN0cmluZyBzdmNOYW1lLCBTdHJpbmcgYnJvd3NlQWNsLCBTdHJp
bmcgeEFjbCwgU3RyaW5nIHJBY2wsIFN0cmluZyB3QWNsLCBib29sZWFuIGRlYnVnKSB0aHJvd3Mg
RXhjZXB0aW9uIHsgICAgCiAgICAJCiAgICAJU3RyaW5nIHJNc2cgPSBudWxsOwogICAgCUlEYXRh
IGdldE5vZGVPdXRwdXQgPSBudWxsOwogICAgCUlEYXRhTWFwIHJlc3VsdE1hcCA9IG51bGw7CiAg
ICAJCiAgICAJSURhdGFNYXAgc2VydmljZU1hcCA9IGdldFNlcnZpY2VJbmZvKHN2Y05hbWUpOwog
ICAgCVN0cmluZyBvcmlnQnJvd3NlQWNsID0gIHNlcnZpY2VNYXAuZ2V0QXNTdHJpbmcoU2VydmVy
SWYuR0VUX1NWQ0lORk9fQlJPV1NFQUNMR1JPVVApOwogICAgCVN0cmluZyBvcmlnUmVhZEFjbCA9
ICBzZXJ2aWNlTWFwLmdldEFzU3RyaW5nKFNlcnZlcklmLkdFVF9TVkNJTkZPX1JFQURBQ0xHUk9V
UCk7CiAgICAJU3RyaW5nIG9yaWdXcml0ZUFjbCA9ICBzZXJ2aWNlTWFwLmdldEFzU3RyaW5nKFNl
cnZlcklmLkdFVF9TVkNJTkZPX1dSSVRFQUNMR1JPVVApOwogICAgCVN0cmluZyBvcmlnRXhlY3V0
ZUFjbCA9ICBzZXJ2aWNlTWFwLmdldEFzU3RyaW5nKFNlcnZlcklmLkdFVF9TVkNJTkZPX0FDTEdS
T1VQKTsKICAgIAkKICAgIAlBcnJheUxpc3Q8U3RyaW5nPiBjaGFuZ2VzID0gbmV3IEFycmF5TGlz
dDw+KCk7CiAgICAJaWYgKCAhYWNsQ2hhbmdlZCggb3JpZ0Jyb3dzZUFjbCwgYnJvd3NlQWNsLCBj
aGFuZ2VzICkpIHsKICAgIAkJYnJvd3NlQWNsID0gb3JpZ0Jyb3dzZUFjbDsgCiAgICAJfSAKICAg
IAlpZiAoICFhY2xDaGFuZ2VkKCBvcmlnUmVhZEFjbCwgckFjbCwgY2hhbmdlcyApKSB7CiAgICAJ
CXJBY2wgPSBvcmlnUmVhZEFjbDsKICAgIAl9CiAgICAJaWYgKCAhYWNsQ2hhbmdlZCggb3JpZ1dy
aXRlQWNsLCB3QWNsLCBjaGFuZ2VzICkpIHsKICAgIAkJd0FjbCA9IG9yaWdXcml0ZUFjbDsKICAg
IAl9CiAgICAJaWYgKCAhYWNsQ2hhbmdlZCggb3JpZ0V4ZWN1dGVBY2wsIHhBY2wsIGNoYW5nZXMg
KSkgewogICAgCQl4QWNsID0gb3JpZ0V4ZWN1dGVBY2w7CiAgICAJfQogICAgCQogICAgCWlmICgg
Y2hhbmdlcy5zaXplKCkgPiAwICkgewogICAgCQogICAgCQlJRGF0YU1hcCBwaXBlTWFwID0gc2Vy
dmljZU1hcDsKICAgIAkJCgkgICAgICAgIHBpcGVNYXAucHV0KFNlcnZlcklmLlNFVF9TVkNJTkZP
X1NFUlZJQ0UsIHN2Y05hbWUpOwoJICAgICAgICBwaXBlTWFwLnB1dChTZXJ2ZXJJZi5TRVRfU1ZD
SU5GT19BQ0xHUk9VUCwgeEFjbCk7CgkgICAgICAgIAoJICAgICAgICAvLyBlbmZvcmNlIGV2ZW4g
aWYgaXQncyBub3QgYSB0b3AgbGV2ZWwgc2VydmljZQkgICAgICAgIAoJICAgICAgICAvLyBwaXBl
TWFwLnB1dChTZXJ2ZXJJZi5TRVRfU1ZDSU5GT19JTlRFUk5BTF9BQ0xfQ0hFQ0ssICJ0cnVlIik7
CgkgICAgICAgIHBpcGVNYXAucHV0KFNlcnZlcklmLlNFVF9TVkNJTkZPX1dSSVRFQUNMR1JPVVAs
IHdBY2wpOwoJICAgICAgICBwaXBlTWFwLnB1dChTZXJ2ZXJJZi5TRVRfU1ZDSU5GT19SRUFEQUNM
R1JPVVAsIHJBY2wpOwoJICAgICAgICBwaXBlTWFwLnB1dChTZXJ2ZXJJZi5TRVRfU1ZDSU5GT19C
Uk9XU0VBQ0xHUk9VUCwgYnJvd3NlQWNsKTsKCgkgICAgICAgIGdldE5vZGVPdXRwdXQgPSBTZXJ2
aWNlLmRvSW52b2tlKFNlcnZlcklmLklGQ19TRVJWSUNFUywgU2VydmVySWYuU1ZDX1NFVF9TRVJW
SUNFX0lORk8sIHBpcGVNYXAuZ2V0SURhdGEoKSk7CgkgICAgICAgIHJlc3VsdE1hcCA9IG5ldyBJ
RGF0YU1hcChnZXROb2RlT3V0cHV0KTsKCSAgICAgICAgck1zZyA9IHJlc3VsdE1hcC5nZXRBc1N0
cmluZygibWVzc2FnZSIpOwoJICAgICAgICBpZiAoIHJNc2cgIT0gbnVsbCAmJiByTXNnLnN0YXJ0
c1dpdGgoImNvbS53bS5hcHAuYjJiLnNlcnZlci5TZXJ2aWNlRXhjZXB0aW9uIikpIHRocm93IG5l
dyBTZXJ2aWNlRXhjZXB0aW9uKHJNc2cpOwoJICAgICAgICAKCSAgICAgICAgaWYgKGRlYnVnKSBs
b2coU3RyaW5nLmZvcm1hdCgiQUNMIHVwZGF0ZTogYnJvd3NlKCVzKSwgZXhlY3V0ZSglcyksIHJl
YWQoJXMpLCB3cml0ZSglcykuICAnYWNsQXNzaWduJyByZXNwb25zZSBtc2c6ICVzIiwKCSAgICAg
ICAgCQlicm93c2VBY2wsIHhBY2wsIHJBY2wsIHdBY2wsIHJNc2cpKTsKICAgIAl9CiAgICAgICAg
cmV0dXJuIHJNc2c7CgogICAgCQogICAgfQogICAgCiAgICBwcml2YXRlIHN0YXRpYyBib29sZWFu
IGFjbENoYW5nZWQoU3RyaW5nIG9yaWdBY2wsIFN0cmluZyBuZXdBY2wsIEFycmF5TGlzdDxTdHJp
bmc+IGNoYW5nZXMpIHsKICAgIAlib29sZWFuIGNoYW5nZWQgPSBmYWxzZTsKICAgIAlpZiAoICJE
ZWZhdWx0Ii5lcXVhbHMob3JpZ0FjbCkpIHsKICAgIAkJb3JpZ0FjbCA9IG51bGw7CiAgICAJfQog
ICAgCWlmICggb3JpZ0FjbCA9PSBudWxsICkgewogICAgCQlpZiAobmV3QWNsICE9IG51bGwpIHsK
ICAgIAkJCWNoYW5nZWQgPSB0cnVlOwogICAgCQkJCiAgICAJCX0KICAgIAl9IGVsc2UgewogICAg
CQljaGFuZ2VkID0gIShvcmlnQWNsLmVxdWFscyhuZXdBY2wpKTsKICAgIAl9CiAgICAJaWYgKCBj
aGFuZ2VkICkgewogICAgCQljaGFuZ2VzLmFkZCggU3RyaW5nLmZvcm1hdCgiJXMtPiVzIixvcmln
QWNsLG5ld0FjbCkpOwogICAgCX0KICAgIAlyZXR1cm4gY2hhbmdlZDsKICAgIH0KICAgIAogICAg
cHJpdmF0ZSBzdGF0aWMgSURhdGFNYXAgZ2V0U2VydmljZUluZm8oU3RyaW5nIHN2Y05hbWUpIHRo
cm93cyBFeGNlcHRpb24gewogICAgCQogICAgCUlEYXRhTWFwIHBpcGVNYXAgPSBuZXcgSURhdGFN
YXAoKTsKICAgIAlwaXBlTWFwLnB1dChTZXJ2ZXJJZi5HRVRfU1ZDSU5GT19TRVJWSUNFLCBzdmNO
YW1lKTsKICAgIAlJRGF0YSByZXN1bHQgPSBTZXJ2aWNlLmRvSW52b2tlKFNlcnZlcklmLklGQ19T
RVJWSUNFUywgU2VydmVySWYuU1ZDX0dFVF9TRVJWSUNFX0lORk8sIHBpcGVNYXAuZ2V0SURhdGEo
KSk7CiAgICAJcmV0dXJuIG5ldyBJRGF0YU1hcChyZXN1bHQpOwogICAgfQoKICAgIHByaXZhdGUg
c3RhdGljIHZvaWQgdXBkYXRlRXhpc3RpbmdTZXJ2aWNlTm9kZShPYmplY3QgaW5TdmNOb2RlLCBT
dHJpbmcgaW5TdmNOYW1lLCBTdHJpbmcgaW5Qa2dOYW1lLCBJRGF0YSBpbk1ldGFEYXRhLAogICAg
CQkgICBib29sZWFuIGRlYnVnKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBpZiAoIGluU3Zj
Tm9kZSBpbnN0YW5jZW9mIE5TTm9kZSApIHsKICAgICAgICAJaWYgKGRlYnVnKSBsb2coU3RyaW5n
LmZvcm1hdCgidXBkYXRlRXhpc3RpbmdTZXJ2aWNlTm9kZSgpIC1kZWxldGluZyBub2RlICclcycg
aW4gcGFja2FnZSAnJXMnIiwgaW5TdmNOYW1lLCBpblBrZ05hbWUpKTsKICAgICAgICAJZGVsZXRl
Tm9kZShpblBrZ05hbWUsIGluU3ZjTmFtZSk7CiAgICAgICAgCWlmIChkZWJ1ZykgbG9nKFN0cmlu
Zy5mb3JtYXQoInVwZGF0ZUV4aXN0aW5nU2VydmljZU5vZGUoKSAtY3JlYXRpbmcgbm9kZSAnJXMn
IGluIHBhY2thZ2UgJyVzJyIsIGluU3ZjTmFtZSwgaW5Qa2dOYW1lKSk7CiAgICAgICAgICAgIGNy
ZWF0ZU5ld1NlcnZpY2VOb2RlKGluU3ZjTmFtZSwgaW5Qa2dOYW1lLCBpbk1ldGFEYXRhLCBkZWJ1
Zyk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgIAlpZiAoZGVidWcpIGxvZyhTdHJp
bmcuZm9ybWF0KCJ1cGRhdGVFeGlzdGluZ1NlcnZpY2VOb2RlKCkgLSBmb3VuZCBhIG5vZGUgdGhh
dCdzIG5vdCBhIE5TTm9kZTogIiwgaW5TdmNOb2RlKSk7CiAgICAgICAgfQogICAgfQoKICAgIHBy
aXZhdGUgc3RhdGljIGJvb2xlYW4gcmVtb3ZlU2VydmljZU5vZGUoT2JqZWN0IGluU3ZjTm9kZSwg
U3RyaW5nIGluU3ZjTmFtZSwgU3RyaW5nIGluUGtnTmFtZSwgYm9vbGVhbiBkZWJ1ZykgdGhyb3dz
IEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKCBpblN2Y05vZGUgaW5zdGFuY2VvZiBPc2dpU2Vydmlj
ZSApIHsKICAgICAgICAJCiAgICAgICAgCUlEYXRhIGRhdGEgPSAoKE9zZ2lTZXJ2aWNlKWluU3Zj
Tm9kZSkuZ2V0QXNEYXRhKCk7CiAgICAgICAgCUlEYXRhTWFwIG1hcERhdGEgPSBuZXcgSURhdGFN
YXAoZGF0YSk7ICAgICAgICAJCiAgICAgICAgCUlEYXRhTWFwIG1ldGFkYXRhTWFwID0gbWFwRGF0
YS5nZXRBc0lEYXRhTWFwKE9zZ2lTZXJ2aWNlLk1FVEFEQVRBX0tFWSk7CiAgICAgICAgCS8vIGRl
bGV0ZSdzIEFDTHMgdG9vCiAgICAgICAgCWRlbGV0ZU5vZGUoaW5Qa2dOYW1lLCBpblN2Y05hbWUp
OwogICAgICAgIAlyZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwog
ICAgfQoKICAgIHByaXZhdGUgc3RhdGljIHZvaWQgZ3VhcmFudGVlSW50ZXJmYWNlUGF0aChTdHJp
bmcgaW5Qa2dOYW1lLCBTdHJpbmcgaW5TdmNOYW1lKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAg
ICBQYWNrYWdlIHBrZyA9IFBhY2thZ2VNYW5hZ2VyLmdldFBhY2thZ2UoaW5Qa2dOYW1lKTsKICAg
ICAgICBOU05hbWUgbmFtZSA9IE5TTmFtZS5jcmVhdGUoaW5TdmNOYW1lKTsKICAgICAgICAvLyAg
Zmlyc3QsIG1ha2Ugc3VyZSBkaXJlY3RvcmllcyBleGlzdCBpbiB0aGUgZmlsZSBzeXN0ZW0KICAg
ICAgICBwa2cuZ2V0U3RvcmUoKS5nZXROb2RlUGF0aChuYW1lKS5ta2RpcnMoKTsKICAgICAgICAv
LyAgdGhlbiwgbWFrZSBzdXJlIGludGVyZmFjZSBub2RlcyBleGlzdCBpbiB0aGUgbmFtZXNwYWNl
IGZvciBlYWNoIGRpcmVjdG9yeQogICAgICAgIE5hbWVbXSBuc1BhdGggPSBuYW1lLmdldEludGVy
ZmFjZVBhdGgoKTsKICAgICAgICBTdHJpbmcgbm9kZU5hbWUgPSAiIjsKICAgICAgICBmb3IgKCBO
YW1lIG5leHRQYXRoRWxlbSA6IG5zUGF0aCApIHsKICAgICAgICAgICAgaWYgKCBub2RlTmFtZS5p
c0VtcHR5KCkgKSB7CiAgICAgICAgICAgICAgICBub2RlTmFtZSArPSBuZXh0UGF0aEVsZW0udG9T
dHJpbmcoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAg
IG5vZGVOYW1lICs9ICIuIiArIG5leHRQYXRoRWxlbS50b1N0cmluZygpOwogICAgICAgICAgICB9
CiAgICAgICAgICAgIE9iamVjdCBub2RlRGF0YSA9IGdldE5vZGUobm9kZU5hbWUpOwogICAgICAg
ICAgICBpZiAoIG5vZGVEYXRhID09IG51bGwgKSB7CiAgICAgICAgICAgICAgICBub2RlRGF0YSA9
IG1ha2VJbnRlcmZhY2VOb2RlKGluUGtnTmFtZSwgbm9kZU5hbWUpOwogICAgICAgICAgICB9CiAg
ICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIHZvaWQgZGVsZXRlTm9kZShTdHJpbmcg
aW5Qa2dOYW1lLCBTdHJpbmcgaW5Ob2RlTmFtZSkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAg
SURhdGFNYXAgcGlwZU1hcCA9IG5ldyBJRGF0YU1hcCgpOwogICAgICAgIHBpcGVNYXAucHV0KE5T
Tm9kZS5LRVlfTlNOX05TTkFNRSwgaW5Ob2RlTmFtZSk7CiAgICAgICAgcGlwZU1hcC5wdXQoTlNO
b2RlLktFWV9OU05fUEFDS0FHRSwgaW5Qa2dOYW1lKTsKICAgICAgICBTZXJ2aWNlLmRvSW52b2tl
KFNlcnZlcklmLklGQ19OUywgImRlbGV0ZU5vZGUiLCBwaXBlTWFwLmdldElEYXRhKCkpOwogICAg
fQoKICAgIHByaXZhdGUgc3RhdGljIE9iamVjdCBnZXROb2RlKFN0cmluZyBpbk5vZGVOYW1lKSB0
aHJvd3MgRXhjZXB0aW9uIHsKICAgIAlyZXR1cm4gZ2V0Tm9kZVNlcnZpY2VJbnZva2UoaW5Ob2Rl
TmFtZSk7CiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgT2JqZWN0IGdldE5vZGVTZXJ2aWNlSW52
b2tlKFN0cmluZyBpbk5vZGVOYW1lKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBJRGF0YU1h
cCBwaXBlTWFwID0gbmV3IElEYXRhTWFwKCk7CiAgICAgICAgcGlwZU1hcC5wdXQoIm5hbWUiLCBp
bk5vZGVOYW1lKTsKICAgICAgICBJRGF0YSBnZXROb2RlT3V0cHV0ID0gU2VydmljZS5kb0ludm9r
ZShTZXJ2ZXJJZi5JRkNfTlMsICJnZXROb2RlIiwgcGlwZU1hcC5nZXRJRGF0YSgpKTsKICAgICAg
ICBJRGF0YU1hcCByZXN1bHRNYXAgPSBuZXcgSURhdGFNYXAoZ2V0Tm9kZU91dHB1dCk7CiAgICAg
ICAgcmV0dXJuIHJlc3VsdE1hcC5nZXQoIm5vZGUiKTsKCiAgICB9CgogICAgcHJpdmF0ZSBzdGF0
aWMgT2JqZWN0IG1ha2VJbnRlcmZhY2VOb2RlKFN0cmluZyBpblBrZ05hbWUsIFN0cmluZyBpbk5v
ZGVOYW1lKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBJRGF0YU1hcCBwaXBlTWFwID0gbmV3
IElEYXRhTWFwKCk7CiAgICAgICAgcGlwZU1hcC5wdXQoTlNOb2RlLktFWV9OU05fTlNOQU1FLCBp
bk5vZGVOYW1lKTsKICAgICAgICBwaXBlTWFwLnB1dChOU05vZGUuS0VZX05TTl9QQUNLQUdFLCBp
blBrZ05hbWUpOwogICAgICAgIHBpcGVNYXAucHV0KE5TTm9kZS5LRVlfTlNOX1RZUEUsIE5TSW50
ZXJmYWNlLlRZUEUpOwogICAgICAgIElEYXRhIG1ha2VOb2RlT3V0cHV0ID0gU2VydmljZS5kb0lu
dm9rZShTZXJ2ZXJJZi5JRkNfTlMsICJtYWtlTm9kZSIsIHBpcGVNYXAuZ2V0SURhdGEoKSk7CiAg
ICAgICAgSURhdGFNYXAgcmVzdWx0TWFwID0gbmV3IElEYXRhTWFwKG1ha2VOb2RlT3V0cHV0KTsK
ICAgICAgICByZXR1cm4gcmVzdWx0TWFwLmdldCgibm9kZSIpOwogICAgfQoKICAgIHByaXZhdGUg
c3RhdGljIHZvaWQgYWRkU2VydmljZURldGFpbHMoSURhdGFNYXAgaW5NYXAsIFN0cmluZyBpblN2
Y05hbWUsIFN0cmluZyBpblBrZ05hbWUsIElEYXRhIGluTWV0YURhdGEpIHRocm93cyBFeGNlcHRp
b24gewogICAgICAgIGluTWFwLnB1dChOU1NlcnZpY2UuS0VZX05TU19TSUcsIG1ldGFkYXRhMlNp
Z25hdHVyZShpbk1ldGFEYXRhKSk7CiAgICAgICAgaW5NYXAucHV0KE9zZ2lTZXJ2aWNlLk1FVEFE
QVRBX0tFWSwgaW5NZXRhRGF0YSk7CiAgICAgICAgaW5NYXAucHV0KE5TTm9kZS5LRVlfTlNOX1BB
Q0tBR0UsIGluUGtnTmFtZSk7CiAgICAgICAgaW5NYXAucHV0KE5TTm9kZS5LRVlfTlNOX05TTkFN
RSwgaW5TdmNOYW1lKTsKICAgICAgICBpbk1hcC5wdXQoImlzX3B1YmxpYyIsIEJvb2xlYW4uVFJV
RSk7CiAgICAgICAgaW5NYXAucHV0KE5TTm9kZS5LRVlfTlNOX1RZUEUsIE5TU2VydmljZS5UWVBF
X0tFWSk7CiAgICAgICAgaW5NYXAucHV0KE5TU2VydmljZS5LRVlfTlNTX1RZUEUsIE9zZ2lTZXJ2
aWNlLk5TVFlQRSk7CiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgT2JqZWN0IG1ldGFkYXRhMlNp
Z25hdHVyZShJRGF0YSBpbk1ldGFEYXRhKSB7CiAgICAgICAgTWV0aG9kTWV0YWRhdGFJbXBsIG1l
dGFkYXRhSW1wbCA9IG5ldyBNZXRob2RNZXRhZGF0YUltcGwoKTsKICAgICAgICBtZXRhZGF0YUlt
cGwuc2V0RnJvbURhdGEoaW5NZXRhRGF0YSk7CiAgICAgICAgTlNSZWNvcmQgaW5TaWcgPSBNZXRh
ZGF0YTJTaWduYXR1cmVzLmNyZWF0ZUlucHV0U2lnKG1ldGFkYXRhSW1wbCk7CiAgICAgICAgTlNS
ZWNvcmQgb3V0U2lnID0gTWV0YWRhdGEyU2lnbmF0dXJlcy5jcmVhdGVPdXRwdXRTaWcobWV0YWRh
dGFJbXBsKTsKICAgICAgICByZXR1cm4gbmV3IE5TU2lnbmF0dXJlKGluU2lnLCBvdXRTaWcpOwog
ICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBmb3JtYXR0ZWQgcGFja2FnZSB2ZXJzaW9u
IHN0cmluZyBmb3IgdGhlIFdtQXBwUGxhdCBwYWNrYWdlLgogICAgICovCiAgICBwcml2YXRlIHN0
YXRpYyBTdHJpbmcgZ2V0R2F0ZXdheVBhY2thZ2VWZXJzaW9uKCkgewogICAgCWlmICggd21BcHBQ
bGF0VmVyc2lvbiA9PSBudWxsKSB7CiAgICAJCVN0cmluZyBwYWNrYWdlVmVyc2lvbiA9IFBBUkVO
VF9QQUNLQUdFX05BTUUrIjs5LjEwLjAiOwoJICAgIAl0cnkgewoJICAgIAkJUGFja2FnZSBwa2cg
PSBQYWNrYWdlTWFuYWdlci5nZXRQYWNrYWdlKFBBUkVOVF9QQUNLQUdFX05BTUUpOwoJICAgIAkJ
aWYgKCBwa2cgIT0gbnVsbCkgewoJICAgIAkJCXBhY2thZ2VWZXJzaW9uID0gZm9ybWF0dGVkUGFj
a2FnZU5hbWUoUEFSRU5UX1BBQ0tBR0VfTkFNRSwgcGtnLmdldFZlcnNpb24oKSk7CgkgICAgCQl9
CgkgICAgCX0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7IH0KCSAgICAJd21BcHBQbGF0VmVyc2lvbiA9
IHBhY2thZ2VWZXJzaW9uOwogICAgCX0KCiAgICAJcmV0dXJuIHdtQXBwUGxhdFZlcnNpb247CiAg
ICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBzdHJpbmcgdGhhdCBtZWV0cyB0aGUgZXhwZWN0
ZWQgZm9ybWF0IGZvciBhIHJlcXVpcmVkIElTIHBhY2thZ2UgZGVwZW5kZW5jeSBhcyBpdCBleGlz
dHMgaW4gdGhlIG1hbmlmZXN0LgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBTdHJpbmcgZm9y
bWF0dGVkUGFja2FnZU5hbWUoU3RyaW5nIHBhY2thZ2VOYW1lLCBTdHJpbmcgcmF3VmVyc2lvbikg
ewogICAgCVN0cmluZyB2ZXJzaW9uID0gcmF3VmVyc2lvbjsKICAgIAlpZiAoIHJhd1ZlcnNpb24g
IT0gbnVsbCkgewogICAgCQlTdHJpbmdbXSBwaWVjZXMgPSByYXdWZXJzaW9uLnNwbGl0KCAiXFwu
Iik7CiAgICAJCVN0cmluZ0J1aWxkZXIgYnVpbGRlciA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7CiAg
ICAJCWZvciAoIGludCBpZHggPSAwOyBpZHggPCAzOyBpZHgrKykgewogICAgCQkJaWYgKGlkeD4w
KSBidWlsZGVyLmFwcGVuZCgnLicpOwogICAgCQkJYnVpbGRlci5hcHBlbmQocGllY2VzW2lkeF0u
dHJpbSgpKTsKICAgIAkJfQogICAgCQl2ZXJzaW9uID0gYnVpbGRlci50b1N0cmluZygpOwogICAg
CX0KICAgIAlyZXR1cm4gcGFja2FnZU5hbWUrIjsiK3ZlcnNpb247CiAgICB9CgogICAgcHJpdmF0
ZSBzdGF0aWMgU3RyaW5nIGdldFJlcXVpcmVkU3RyaW5nKFN0cmluZyBrZXksIElEYXRhTWFwIHBp
cGVNYXApIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsKICAgIAlTdHJpbmcgdmFsdWUgPSBwaXBl
TWFwLmdldEFzU3RyaW5nKGtleSk7CiAgICAJaWYgKCB2YWx1ZSA9PSBudWxsIHx8IHZhbHVlLmxl
bmd0aCgpID09IDApIHsKICAgIAkJU3RyaW5nIG1zZyA9IFN0cmluZy5mb3JtYXQoIiVzIGlzIHJl
cXVpcmVkIGlucHV0IHBhcmFtZXRlciIsIGtleSk7CiAgICAJCXRocm93IG5ldyBTZXJ2aWNlRXhj
ZXB0aW9uKG1zZyk7CiAgICAJfQogICAgCXJldHVybiB2YWx1ZTsKICAgIH0KCiAgICBwcml2YXRl
IHN0YXRpYyB2b2lkIGxvZyggU3RyaW5nIG1lc3NhZ2UpIHsKICAgIAlTeXN0ZW0ub3V0LnByaW50
bG4oU3RyaW5nLmZvcm1hdCgiPj4+W0FwcFBsYXQgR2F0ZXdheV0gJXMiLCBtZXNzYWdlKSk7CiAg
ICB9CgogICAgLyoqCiAgICAgKiBQZXJtaXNzaW9ucyBmb3IgdGhvc2Ugc2VydmljZXMgdGhhdCBh
cmUgdXNlZCBieSBXbUFwcFBsYXQKICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBpbml0
U2VydmljZUFDTHMoU3RyaW5nW10gYXBTZXJ2aWNlcykgewoKCQlpZiAoIGFwU2VydmljZXMgIT0g
bnVsbCkgewoJCQlmb3IgKCBTdHJpbmcgYXBTZXJ2aWNlIDogYXBTZXJ2aWNlcykgewoJCSAgICAJ
dHJ5IHsKCQkgICAgCQlTdHJpbmcgck1zZyA9IHVwZGF0ZUFDTHNGb3JTZXJ2aWNlKCBhcFNlcnZp
Y2UsIAoJICAgICAgICAgICAgCQlBQ0xNYW5hZ2VyLldFQk1fQURNSU5JU1RSQVRPUlNfQUNMLCAv
LyBicm93c2UKCSAgICAgICAgICAgIAkJQUNMTWFuYWdlci5JTlRFUk5BTF9BQ0wsICAvLyBleGVj
dXRlIAoJICAgICAgICAgICAgCQludWxsLCAvKkFDTE1hbmFnZXIuV0VCTV9JTlRFUk5BTERFVl9B
Q0wsKi8gLy8gcmVhZAoJICAgICAgICAgICAgCQludWxsLCAvKkFDTE1hbmFnZXIuV0VCTV9JTlRF
Uk5BTERFVl9BQ0wsKi8gLy8gd3JpdGUKCSAgICAgICAgICAgIAkJZmFsc2UpOyAKCQoJCgkJICAg
IAl9IGNhdGNoIChFeGNlcHRpb24gZSkgewoJCSAgICAJCVNlcnZlci5sb2dFcnJvcihlKTsJCgkJ
ICAgIAl9CgkJCX0KCQl9CiAgICB9CiAgICAK</value>
  <value name="encodeutf8">true</value>
  <array name="imports" type="value" depth="1">
    <value>com.wm.app.b2b.util.ServerIf</value>
    <value>com.wm.app.b2b.server.Package</value>
    <value>com.wm.app.b2b.server.PackageManager</value>
    <value>com.wm.app.b2b.server.PackageStore</value>
    <value>com.wm.app.b2b.server.ACLManager</value>
    <value>com.softwareag.util.IDataMap</value>
    <value>com.wm.lang.ns.NSInterface</value>
    <value>com.wm.lang.ns.NSName</value>
    <value>com.wm.lang.ns.NSNode</value>
    <value>com.wm.lang.ns.NSRecord</value>
    <value>com.wm.lang.ns.NSService</value>
    <value>com.wm.lang.ns.NSSignature</value>
    <value>com.wm.util.Name</value>
    <value>com.softwareag.applatform.pls.is.osgi.MethodMetadataImpl</value>
    <value>com.softwareag.applatform.pls.is.osgi.Metadata2Signatures</value>
    <value>com.softwareag.applatform.pls.is.osgi.OsgiService</value>
    <value>java.util.ArrayList</value>
    <value>java.util.Arrays</value>
  </array>
</Values>
